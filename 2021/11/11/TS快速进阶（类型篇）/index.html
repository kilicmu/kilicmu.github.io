

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰ - herin ã® éƒ¨è½æ ¼</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />

  
  <meta name="keywords" content="undefined"> 
  
  <meta name="description" content="TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰æœ¬æ–‡demoçš„codesand..."> 
  
  <meta name="author" content="herin"> 

  
    <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  
  
    <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  
  
    <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  
  
    <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_h1619vhl1nr.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css">

  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        loadingImage: '',
      },
      donate: {
        enable: true,
        alipay: '/images/others/alipay.jpg',
        wechat: '/images/others/wechat.jpg'
      },
      motto: {
        api: '',
        default: 'fading is true while flowering is pastã€‚'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        alwaysShow: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: true
      }
    }
  </script>

  

  
<meta name="generator" content="Hexo 5.3.0"></head>
<body class="lock-screen">
  <div class="loading"></div>
  


<nav class="navbar">
  <div class="left"></div>
  <div class="center">TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰</div>
  <div class="right">
    <i class="iconfont iconmenu j-navbar-menu"></i>
  </div>
</nav>

  <nav class="menu">
  <div class="menu-wrap">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content">
      
      
      
      
      <li class="menu-item"><a href="/ " class="underline"> é¦–é¡µ</a></li>
      
      
      
      
      <li class="menu-item"><a href="/galleries " class="underline"> æ‘„å½±</a></li>
      
      
      
      
      <li class="menu-item"><a href="/archives " class="underline"> å½’æ¡£</a></li>
      
      
      
      
      <li class="menu-item"><a href="/tags " class="underline"> æ ‡ç­¾</a></li>
      
      
      
      
      <li class="menu-item"><a href="/categories " class="underline"> åˆ†ç±»</a></li>
      
      
      
      
      <li class="menu-item"><a href="/about " class="underline"> å…³äº</a></li>
      
    </ul>
    <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  </div>
</nav>
  <main id="main">
  <div class="container" id="container">
    <article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="https://z3.ax1x.com/2021/11/12/IDitBV.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>November 11, 2021</span
        class="post-info-item">
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>8730</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <h2 id="TS-å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰"><a href="#TS-å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰" class="headerlink" title="TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰"></a>TS å¿«é€Ÿè¿›é˜¶ï¼ˆç±»å‹ç¯‡ï¼‰</h2><p>æœ¬æ–‡demoçš„codesandboxåœ°å€ï¼š</p>
<p><a href="https://codesandbox.io/s/wild-thunder-cfn6z?file=/src/index.ts">https://codesandbox.io/s/wild-thunder-cfn6z?file=/src/index.ts</a></p>
<p>å†™çš„æ¯”è¾ƒç€æ€¥ï¼Œå¯èƒ½æœ‰çš„demoå·²ç»ä¸¢å¤±ã€‚ã€‚ã€‚è§è°…ã€‚</p>
<h3 id="å‰ç½®å£°æ˜"><a href="#å‰ç½®å£°æ˜" class="headerlink" title="å‰ç½®å£°æ˜"></a>å‰ç½®å£°æ˜</h3><p>å…ˆæ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼ŒTSå­˜åœ¨ç±»å‹ç©ºé—´ï¼ˆtype spaceï¼‰å’Œå€¼ç©ºé—´ï¼ˆvalue spaceï¼‰ä¸¤ä¸ªæ¦‚å¿µã€‚</p>
<p>åŒä¸€ä¸ªå£°æ˜ï¼ˆå¦‚ï¼šclasså£°æ˜ï¼Œenumå£°æ˜ï¼‰å¯èƒ½åŒæ—¶å­˜åœ¨ç±»å‹ç©ºé—´ä¸å€¼ç©ºé—´ä¸­ï¼Œæœ¬æ–‡ä¸»è¦æ”¾åœ¨ç±»å‹ç©ºé—´çš„ä½¿ç”¨è®²è§£ï¼Œå€¼ç©ºé—´å¤§éƒ¨åˆ†å¯ä»¥ç†è§£ä¸ºå’Œ ES6+ ç›¸å·®æ— å‡ ï¼ŒæŒæ¡äº† ES6+ åŸºæœ¬å°±ç†è§£äº†TSçš„å€¼ç©ºé—´å¤§éƒ¨åˆ†æ¦‚å¿µã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡è¯»è€…å¯¹ES6è¯­æ³•æœ‰æ‰€æŒæ¡ä¸”äº†è§£TSçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœå®Œå…¨ä¸äº†è§£å¸Œæœ›å¯ä»¥å…ˆçœ‹TSå®˜æ–¹æ–‡æ¡£æˆ–handbookæ–‡æ¡£å†çœ‹æœ¬æ–‡ï¼Œæœ¬æ–‡ä¸ä¼šé‡å¤çº ç»“äºæ–‡æ¡£å†…å®¹ã€‚</p>
<h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="ç±»å‹ä¸å€¼ä¸å˜é‡ï¼ˆåˆ«åï¼‰å®šä¹‰"><a href="#ç±»å‹ä¸å€¼ä¸å˜é‡ï¼ˆåˆ«åï¼‰å®šä¹‰" class="headerlink" title="ç±»å‹ä¸å€¼ä¸å˜é‡ï¼ˆåˆ«åï¼‰å®šä¹‰"></a>ç±»å‹ä¸å€¼ä¸å˜é‡ï¼ˆåˆ«åï¼‰å®šä¹‰</h4><p>ç®€å•ç†è§£ï¼Œåœ¨TSç±»å‹ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„æŠŠç±»å‹çœ‹åšæ˜¯ä¸€ä¸ªå€¼çš„é›†åˆï¼Œå¦‚æœ‰ç±»å‹: numberï¼Œ{-Infinity, 1, 2, 3, 4, â€¦. , Infinity, NaN} âˆˆ numberï¼Œåˆ™numberå¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªç±»å‹ã€‚</p>
<p>ä½†æ˜¯å½“ä¸€ä¸ªç±»å‹ä½œä¸ºæœ€å°å­é›†çš„æ—¶å€™ï¼Œç±»å‹æœ¬èº«åˆ™å¯ä»¥è¢«è§†ä¸ºå€¼~ã€‚</p>
<p>ä¸¾ä¸ªå°ğŸŒ°ï¼š</p>
<p>å£°æ˜åˆ«åAï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> A = <span class="hljs-built_in">number</span><br><span class="hljs-keyword">const</span> val: A = <span class="hljs-number">1</span> <span class="hljs-comment">// ç¼–è¯‘é€šè¿‡</span><br><span class="hljs-comment">// or: const val: A = 2 // ç¼–è¯‘é€šè¿‡</span><br><span class="hljs-comment">//...</span><br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯¹äºç±»å‹ç³»ç»Ÿæ¥è¯´ï¼Œåˆ«å<code>A</code>å¯ä»¥çœ‹åšä¸€ä¸ªæ•°å€¼é›†åˆï¼Œæ‰€ä»¥åˆ«åAæœ¬èº«å¯ä»¥è¢«ä½œä¸ºç±»å‹æ ‡æ³¨ä½¿ç”¨ã€‚</p>
<p>ä½†æ˜¯å‡å¦‚æˆ‘ä»¬å£°æ˜åˆ«åBï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> B = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œåˆ«åBå¯¹åº”æœ€å°é›†åˆ 1ï¼Œæ­¤æ—¶ï¼Œåˆ«åä»…å¯è¡¨ç¤ºå”¯ä¸€å€¼ï¼Œåˆ™æ­¤åˆ«åæˆ‘ä»¬å¯ä»¥è§†ä¸ºä¸€ä¸ªå€¼çš„å®šä¹‰è€Œéç±»å‹ã€‚</p>
<p>åœ¨Typescriptä¸­ï¼Œç±»å‹ç³»ç»Ÿçš„å˜é‡å®šä¹‰å¯ä»¥é€šè¿‡typeå®ç°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> variable = <span class="hljs-number">1</span><br><span class="hljs-comment">// ==&gt; ç­‰ä»·JS</span><br><span class="hljs-keyword">const</span> variable = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå˜é‡çš„å®šä¹‰å­˜åœ¨ä½œç”¨åŸŸçš„æ¦‚å¿µï¼ŒTSç±»å‹å˜é‡ä½œç”¨åŸŸä¸JSæœ‰ä¸€äº›ä¸åŒã€‚åœ¨JavaScriptä¸­ï¼Œå­˜åœ¨å¾ˆå¤šçš„ä½œç”¨åŸŸæ¦‚å¿µï¼Œå¦‚ï¼šES6ä»¥å‰çš„å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€eval ä½œç”¨åŸŸã€‚ES6æ–°å¢çš„å—çº§ä½œç”¨åŸŸ~ã€‚</p>
<p>TSç±»å‹ç³»ç»Ÿä¸­ä»…ä»…åŒ…å«ä¸¤ä¸ªä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸä¸å±€éƒ¨ä½œç”¨åŸŸã€‚</p>
<p>å…¨å±€ä½œç”¨åŸŸå£°æ˜è§ä»¥ä¸‹Demoï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> globalVariable = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;caa&#x27;</span>] <span class="hljs-comment">// å…¨å±€ä½œç”¨åŸŸçš„å…ƒç»„å£°æ˜</span><br></code></pre></td></tr></table></figure>
<p>å±€éƒ¨ä½œç”¨åŸŸæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ä¾é  infer æ¥å®ç°æ‰€éœ€æ•ˆæœï¼Œå¦‚æœçœ‹ä¸æ‡‚å¯ä»¥æš‚æ—¶ä¸å»çº ç»“ï¼Œåé¢ infer å°ç»“ä¼šåšå‡ºè®²è§£ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> B = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;caa&#x27;</span>] <span class="hljs-keyword">extends</span> infer scopedVariable ? (<br>    scopedVariable <span class="hljs-comment">// =&gt; åœ¨è¿™ä¸ªæ‹¬å·çš„è¡¨è¾¾å¼èŒƒå›´å†…ï¼ŒscopedVariable éƒ½è¢«å®šä¹‰ä¸º [&#x27;foo&#x27;, &#x27;caa&#x27;] å…ƒç»„~</span><br>) : <span class="hljs-built_in">never</span>  <br></code></pre></td></tr></table></figure>
<h4 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h4><p>extendsç®€å•æ¥è¯´å¯ä»¥ç†è§£ä¸ºå®šä¹‰ç±»å‹çš„æ”¶æ•›ï¼Œå‡è®¾æœ‰ A extends Bï¼Œä»£è¡¨ A ä¸º B çš„å­é›†ã€‚åœ¨ TS ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨ extends æ¥åšä¸€äº›æ³›å‹æˆ–ç±»å‹çš„é™å®šæ“ä½œã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> foo = <span class="hljs-number">1</span> | <span class="hljs-number">2</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><span class="hljs-comment">// =&gt; foo = true</span><br><span class="hljs-keyword">type</span> foo = [<span class="hljs-number">1</span>] <span class="hljs-keyword">extends</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><span class="hljs-comment">// =&gt; foo = false</span><br><span class="hljs-keyword">type</span> Foo = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">T</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">string</span> | <span class="hljs-attr">number</span>&gt;</span>(arg: T) =&gt; void</span><br>const fn: Foo = (arg: Record&lt;string, any&gt;) =&gt; &#123;&#125;<br>// =&gt; Error: Type &#x27;string | number&#x27; is not assignable to type &#x27;Record&lt;string, any&gt;&#x27;.<br></code></pre></td></tr></table></figure>
<p>ç»“åˆä¸Šé¢çš„ç±»å‹ç³»ç»Ÿçš„å€¼å’Œç±»å‹ä¸¤ä¸ªç»´åº¦æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹è§„å¾‹ï¼š</p>
<table>
<thead>
<tr>
<th>è§„åˆ™</th>
<th>ç‰¹æ€§</th>
</tr>
</thead>
<tbody><tr>
<td>å€¼   extends    ç±»å‹</td>
<td>åˆ¤æ–­å€¼æ˜¯å¦å±äºç±»å‹</td>
</tr>
<tr>
<td>å€¼   extends    å€¼</td>
<td>ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œç­‰ä»·äº ç¼–ç¨‹è¯­è¨€çš„ï¼š <code>===</code></td>
</tr>
<tr>
<td>ç±»å‹   extends  å€¼</td>
<td>æ’å®šä¸ºå¦</td>
</tr>
<tr>
<td>ç±»å‹   extends  ç±»å‹</td>
<td>å‰ç½®ç±»å‹æ˜¯å¦ä¸ºåç½®ç±»å‹å­é›†</td>
</tr>
</tbody></table>
<p>åŸºäºè¿™ä¸ªè§„å¾‹ï¼Œåˆ©ç”¨ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åšåˆ°åœ¨ç±»å‹ç³»ç»Ÿåšåˆ°è¯­è¨€çº§åˆ«çš„åˆ¤æ–­èƒ½åŠ›~</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> result = <span class="hljs-number">1</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">1</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br><span class="hljs-comment">// =&gt; ç­‰ä»·äº</span><br><span class="hljs-keyword">const</span> result = <span class="hljs-number">1</span> === <span class="hljs-number">1</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure>
<h4 id="infer"><a href="#infer" class="headerlink" title="infer"></a>infer</h4><p>inferåœ¨TSä¸­ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾ä»¥ç†è§£çš„æ¦‚å¿µäº†ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œä¸ªäººç†è§£ infer æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ä½¿å¾— extends æ¡ä»¶æˆç«‹çš„æ¨å¯¼ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š</p>
<p>å‡è®¾ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªåˆ«åä¸ºFnçš„å‡½æ•°ç±»å‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Fn = <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span><br></code></pre></td></tr></table></figure>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦æ‹¿åˆ°ä»–çš„å‚æ•°ç±»å‹ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ ¹æ®å­—é¢å€¼å†™å‡ºæ¥ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Arg = <span class="hljs-built_in">string</span><br></code></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœæœ‰åŠ¨æ€è·å–çš„éœ€æ±‚ï¼Œæ˜¾ç„¶è¿™ä¹ˆåšä¸æ˜¯å¾ˆä¼˜é›…ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å€ŸåŠ© infer çš„èƒ½åŠ›äº†ã€‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»å‹ï¼šGetArgs<T>æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè·å–å‡½æ•°å‚æ•°:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> GetArgs&lt;T&gt; = T <span class="hljs-keyword">extends</span> (arg: infer K) =&gt; <span class="hljs-built_in">any</span> ? K : <span class="hljs-built_in">never</span><br><span class="hljs-keyword">type</span> args = GetArgs&lt;Fn&gt;<br><span class="hljs-comment">// =&gt; args = string</span><br></code></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¸Šé¢çš„è¿™ä¸ªæ¨å¯¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬æŠŠFnçš„å®šä¹‰æ”¹ä¸ºå¦‚ä¸‹å½¢å¼ï¼Œä¸Šé¢çš„å®šä¹‰æ˜¾ç„¶å°±ä¼šå¤±æ•ˆï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Fn = <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">string</span>, foo: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span><br><span class="hljs-keyword">type</span> args = GetArgs&lt;Fn&gt;<br><span class="hljs-comment">// =&gt; args = never</span><br></code></pre></td></tr></table></figure>
<p>è‡³äºä¸ºä»€ä¹ˆä¼šå¤±æ•ˆï¼Œå› ä¸ºç±»å‹ (val: string, foo: number) =&gt; void å‚æ•°åˆ—è¡¨æ— è®ºå¦‚ä½•ä¹Ÿæ— æ³•åŒ¹é…ä¸Š (args: K) =&gt; anyçš„å‚æ•°åˆ—è¡¨ï¼Œæ‰€ä»¥åªèƒ½è§¦å‘äº†extendsçš„falseåˆ†æ”¯ã€‚è·å–åˆ°äº†neverã€‚</p>
<p>ä¸ºäº†ä½¿å¾—å¤šå‚æ•°å‡½æ•°ç±»å‹ä½¿ç”¨GetArgsä»ç„¶å¯ä»¥è·å–æ­£ç¡®çš„å‚æ•°ï¼Œå¯ä»¥æŠŠä¸Šè¿°å®šä¹‰æ”¹ä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> GetArgs&lt;T&gt; = T <span class="hljs-keyword">extends</span> (...args: infer K) =&gt; <span class="hljs-built_in">any</span> ? K : <span class="hljs-built_in">never</span><br><span class="hljs-keyword">type</span> Fn = <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">string</span>, foo: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span><br><span class="hljs-keyword">type</span> args = GetArgs&lt;Fn&gt;<br><span class="hljs-comment">// =&gt; args = [string, number]</span><br></code></pre></td></tr></table></figure>
<p>ä½†æ˜¯è·å–çš„æ˜¯ä¸€ä¸ªç±»å‹å…ƒç»„ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬é¢„æœŸ~ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥å†æŠ½è±¡ä¸€ä¸ªç±»å‹æ–¹æ³•ï¼Œç”¨æ¥è·å–ç¬¬nä¸ªå‚æ•°ç±»å‹ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> _GetNthArg&lt;T <span class="hljs-keyword">extends</span> unknown[], K&gt; = T[<span class="hljs-string">&quot;length&quot;</span>] <span class="hljs-keyword">extends</span> K ? T : _GetNthArg&lt;[...T, unknown], K&gt;<br><span class="hljs-keyword">type</span> GetNthArg&lt;T, K&gt; = T <span class="hljs-keyword">extends</span> [..._GetNthArg&lt;[], K&gt;, infer R, ...infer RR] ? R : <span class="hljs-built_in">never</span><br><br><span class="hljs-keyword">type</span> secondParamType = GetNthArg&lt;GetArgs&lt;Fn&gt;, <span class="hljs-number">1</span>&gt;<br><span class="hljs-comment">// =&gt; secondParamType = number</span><br></code></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­å…¶å®æ•…æ„ç”¨äº†å¤æ‚çš„å†™æ³•ï¼Œä¸»è¦ä¸ºäº†æ¼”ç¤ºinferçš„èƒ½åŠ›ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸‹æ ‡å–å€¼ã€‚</p>
<p>è¿™ä¸ªDemoå› ä¸ºTSç±»å‹æ²¡æœ‰é—­åŒ…çš„èƒ½åŠ›ã€‚æ‰€ä»¥é€’å½’ä¿å­˜çŠ¶æ€åªèƒ½ä½¿ç”¨æ³›å‹ä¼ å‚ï¼Œå¯èƒ½ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥å®ç°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚</p>
<p>å¯¹äºé€’å½’ï¼ŒTSå…·æœ‰å±‚æ•°é™åˆ¶ã€‚å½“ç„¶ï¼Œä¸Šé¢è¿™ç§å°¾é€’å½’ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œæ‰€ä»¥ä¸å­˜åœ¨é—®é¢˜è§¦å‘TSé€’å½’æ·±åº¦é™åˆ¶é—®é¢˜ï¼Œåé¢é‡åˆ°ç›¸åŒé—®é¢˜å°†å…·ä½“è¯´æ˜ã€‚</p>
<p>åŒç†ä¹Ÿå¯ä»¥å†™å‡ºRetureTypeçš„å®ç°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> RetureType&lt;T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = T <span class="hljs-keyword">extends</span> (...args: <span class="hljs-built_in">any</span>[]) =&gt; infer K ? K : <span class="hljs-built_in">never</span><br><span class="hljs-keyword">type</span> rtResult = RetureType&lt;Fn&gt;<br><span class="hljs-comment">// =&gt; rtResult = void</span><br></code></pre></td></tr></table></figure>
<p>tså†…ç½®äº†å¾ˆå¤šå†…ç½®çš„ç±»å‹æ–¹æ³•ï¼Œå¯ä»¥åœ¨<code>lib.es.d.ts</code>æŸ¥çœ‹ç›¸å…³å®šä¹‰ä¸ä½¿ç”¨æ–‡æ¡£~</p>
<h4 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h4><p>æ³›å‹å¯ä»¥çœ‹åšæ¥å£æˆ–ç±»å‹åˆ«åçš„å‚æ•°~ä¸»è¦ç›®çš„æ˜¯å®ç°ç»„ä»¶ç»“æ„ï¼ˆç±»ã€å‡½æ•°ã€ç±»å‹ç­‰ç­‰ï¼‰çš„å¤ç”¨ã€‚</p>
<p>å¯¹äºç±»å‹ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„æŠŠæ³›å‹æƒ³è±¡ä¸ºå‡½æ•°çš„å‚æ•°~</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> judgeStr&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-string">&quot;hello&quot;</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br><span class="hljs-comment">// =&gt; ç­‰ä»·äºä»¥ Go ä¸ºä¾‹çš„å¼ºç±»å‹è¯­è¨€ï¼š</span><br>func judgeStr(T <span class="hljs-built_in">string</span>) bool &#123;<br>  <span class="hljs-keyword">return</span> T === <span class="hljs-string">&quot;hello&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>å…¶å®ä¸Šé¢çš„å‡ ä¸ªå°ç»“å·²ç»ç”¨äº†å¾ˆå¤šçš„ç±»å‹æ³›å‹ï¼Œæ‰€ä»¥å¦‚æœä½ èƒ½æŠŠä¸Šé¢çš„éƒ½ææ‡‚äº†ï¼Œæˆ‘çŒœæµ‹å¯¹äºæ³›å‹åº”è¯¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆææƒ§äº†ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘å°±ä¸€å¸¦è€Œè¿‡äº†~</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯´è¯´é‡å¤´æˆâ€”â€”é€†å˜ã€åå˜ã€‚</p>
<h4 id="é€†å˜ã€åå˜"><a href="#é€†å˜ã€åå˜" class="headerlink" title="é€†å˜ã€åå˜"></a>é€†å˜ã€åå˜</h4><p>å¾ˆå¤šç«¥é‹åœ¨å†™TSæ—¶ï¼Œæ€»æ˜¯è¢«ç¼–è¯‘å™¨ç»™å‡ºçš„æ»¡å±æŠ¥é”™æ¯’æ‰“~ä¸çŸ¥é“ä½ æ˜¯å¦æœ‰è¿‡è°ƒæ¥è°ƒå»ï¼Œå‘ç°ä»ç„¶é€šä¸è¿‡ç¼–è¯‘ï¼Œæ°”çš„æƒ³è¦<code>rm -rf</code>çš„ç»å†âˆ (Â°ã‚Â°)ã€‚</p>
<p>æ”¾å¿ƒï¼Œåªè¦ä½ çœŸæ­£æŒæ¡äº†è¿™ä¸€å°ç»“ï¼Œè¿™äº›é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£~</p>
<p>å…ˆè¯´è¯´ä¸ºä»€ä¹ˆéœ€è¦å˜å½¢å§ï¼š</p>
<h5 id="å˜å½¢"><a href="#å˜å½¢" class="headerlink" title="å˜å½¢"></a>å˜å½¢</h5><p>å‡ ä¹æ‰€æœ‰çš„ç±»å‹ç¼–ç¨‹è¯­è¨€éƒ½ç»•ä¸å¼€å˜å½¢ï¼Œç±»å‹ç³»ç»Ÿæ›´æ˜¯æ— æ³•ç»•å¼€å˜å½¢çš„å­˜åœ¨ã€‚</p>
<p>å¯¹äºç±»å‹æ¥è¯´ï¼Œå½“ç„¶å­ç±»å‹ç›¸å¯¹äºçˆ¶ç±»å‹å­˜åœ¨æ›´å¤šçš„å±æ€§ï¼Œä¸”å±æ€§è¾ƒå¤šçš„ç±»å‹ä¸ºå±æ€§è¾ƒå°‘ç±»å‹çš„å­é›†ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">interface</span> Parent &#123;<br>  pp(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> Son <span class="hljs-keyword">extends</span> Parent &#123;<br>  ss(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> result = Son <span class="hljs-keyword">extends</span> Parent ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br><span class="hljs-comment">// =&gt; true</span><br></code></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¯¹äºé›†åˆç³»ç»Ÿç›¸åï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> a = <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span><br><span class="hljs-keyword">type</span> b = <span class="hljs-number">1</span> | <span class="hljs-number">2</span><br><span class="hljs-keyword">type</span> result = a <span class="hljs-keyword">extends</span> b ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br><span class="hljs-comment">// =&gt; result = false</span><br><span class="hljs-keyword">let</span> aa: a <br><span class="hljs-keyword">let</span> bb: b<br>aa = bb<br><span class="hljs-comment">// =&gt; no error</span><br>bb = aa<br><span class="hljs-comment">// =&gt; error: Type &#x27;3&#x27; is not assignable to type &#x27;b&#x27;.</span><br></code></pre></td></tr></table></figure>
<p>è™½ç„¶è¿èƒŒäº†ç±»å‹ç³»ç»ŸçŸ¥è§‰ï¼Œä½†æ˜¯å¯¹äºé›†åˆæ¥è¯´ï¼Œå¯¹äºç±»å‹aå¯èƒ½å­˜åœ¨å‡ºç°3çš„å¯èƒ½æ€§ï¼Œä½†æ˜¯å¯¹äºç±»å‹bä¸å­˜åœ¨æ­¤å…ƒç´ ï¼Œé›†åˆä¸¢å¤±äº†å…ƒç´ ï¼Œæ˜¾ç„¶å±æ€§æ›´å°‘çš„é›†åˆæ‰æ˜¯å­é›†ã€‚</p>
<p>ä»”ç»†è§‚å¯Ÿä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Œçœ‹ä¼¼çŸ›ç›¾ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªå…±åŒç‚¹ï¼šå¯¹äºçˆ¶ç±»å‹æ¥è¯´ï¼Œç›¸å¯¹è€Œè¨€æ›´åŠ å®½æ³›ã€‚è€Œå­ç±»å‹åˆ™æ›´åŠ å…·ä½“ã€‚æ‰€ä»¥å­ç±»å‹æ˜¯å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å‹çš„ã€‚</p>
<h5 id="é€†å˜å’Œåå˜"><a href="#é€†å˜å’Œåå˜" class="headerlink" title="é€†å˜å’Œåå˜"></a>é€†å˜å’Œåå˜</h5><p>å®šä¹‰ï¼š</p>
<p><strong>é€†å˜ï¼ˆcontra-varianceï¼‰ï¼šå­ç±»å‹å¯ä»¥è½¬æ¢ä¸ºçˆ¶ç±»å‹</strong></p>
<p><strong>åå˜ï¼ˆco-varianceï¼‰ï¼šçˆ¶ç±»å‹å¯ä»¥è½¬æ¢ä¸ºå­ç±»å‹</strong></p>
<p>å‡å¦‚æœ‰å¦‚ä¸‹ä¸¤ä¸ªç±»å‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">interface</span> Father &#123;<br>  doNormalThings(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> Son <span class="hljs-keyword">extends</span> Father &#123;<br>  doSpecialThings(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// è‹¥æœ‰ä¸¤ä¸ªå‡½æ•°ç­¾åï¼š</span><br><span class="hljs-keyword">type</span> Fn1 = <span class="hljs-function">(<span class="hljs-params">father: Father</span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br><span class="hljs-keyword">type</span> Fn2 = <span class="hljs-function">(<span class="hljs-params">son: Son</span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br><br><span class="hljs-keyword">let</span> f1: Fn1 = <span class="hljs-function">(<span class="hljs-params">father: Father</span>) =&gt;</span> &#123;&#125;;<br><span class="hljs-keyword">let</span> f2: Fn2 = <span class="hljs-function">(<span class="hljs-params">son: Son</span>) =&gt;</span> &#123;&#125;;<br><br>f1 = f2<br><span class="hljs-comment">// =&gt; errorï¼šProperty &#x27;doSpecialThings&#x27; is missing in type &#x27;Father&#x27; but required in type &#x27;Son&#x27;.</span><br>f2 = f1<br><span class="hljs-comment">// =&gt; ç¼–è¯‘é€šè¿‡</span><br></code></pre></td></tr></table></figure>
<p>ç®€å•ç†è§£ä¸€ä¸‹ï¼Œå¯¹äºå‡½æ•°å‚æ•°æ¥è¯´ï¼ŒTSå…è®¸ç±»å‹å‘ç”Ÿåå˜ï¼Œå¯¹äºFn1çš„ç­¾åï¼Œfatherå‚æ•°å®ä¾‹æ¨å¯¼å‡ºçš„å¯ä½¿ç”¨å±æ€§çš†ä¸ºsonå®ä¾‹å±æ€§çš„å­é›†ï¼Œæ‰€ä»¥ç­¾åä¸ºFn1çš„å˜é‡èµ‹å€¼ç»™ç­¾åä¸ºFn2çš„å˜é‡æ˜¾ç„¶æ˜¯å®‰å…¨çš„ã€‚</p>
<p>å†æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼ŒåŒæ ·çš„Fn1å’ŒFn2å¦‚ä¸‹å®šä¹‰ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Fn1 = <span class="hljs-function">() =&gt;</span> Father;<br><span class="hljs-keyword">type</span> Fn2 = <span class="hljs-function">() =&gt;</span> Son;<br><br><span class="hljs-keyword">let</span> f1: Fn1 = <span class="hljs-function">() =&gt;</span> (&#123;&#125; <span class="hljs-keyword">as</span> Father);<br><span class="hljs-keyword">let</span> f2: Fn2 = <span class="hljs-function">() =&gt;</span> (&#123;&#125; <span class="hljs-keyword">as</span> Son);<br><br>f1 = f2;<br><span class="hljs-comment">// =&gt; ç¼–è¯‘é€šè¿‡</span><br>f2 = f1;<br><span class="hljs-comment">// =&gt; error: &#x27;doSpecialThings&#x27; is declared here.</span><br></code></pre></td></tr></table></figure>
<p>å¯è§ï¼Œå¯¹äºå‡½æ•°è¿”å›å€¼ç±»å‹ï¼ŒTSé‡‡å–äº†åå˜å…¼å®¹çš„ç­–ç•¥ï¼šå³å¯¹äºè¿”å›å€¼çš„å¯èƒ½æ€§è¿›è¡Œæ”¶æ•›ï¼Œä¿è¯é‡èµ‹å€¼åçš„å‡½æ•°è¿”å›å€¼åœ¨åç»­ç±»å‹æ¨å¯¼ä¿è¯å®‰å…¨ã€‚</p>
<h5 id="åŒå˜"><a href="#åŒå˜" class="headerlink" title="åŒå˜"></a>åŒå˜</h5><p>å‚æ•°ç±»å‹æ—¢å¯ä»¥åå˜åˆå¯ä»¥é€†å˜~ï¼ˆåŠå…¶ä¸å®‰å…¨ï¼‰ï¼Œè¯·é€šè¿‡strictFunctionTypes<code>æˆ–</code>strictï¼štrueæ¥å…³é—­è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h5 id="ä¸å˜"><a href="#ä¸å˜" class="headerlink" title="ä¸å˜"></a>ä¸å˜</h5><p>å®Œå…¨ä¸å…¼å®¹ï¼Œåˆ™ä¼šå‘ç”Ÿä¸å˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">interface</span> T1 &#123;<br>  a: numebr;<br>&#125;<br><span class="hljs-keyword">interface</span> T2 &#123;<br>  b: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">let</span> a: T1 = &#123;<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>&#125;<br><span class="hljs-keyword">let</span> b: T2 = &#123;<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>&#125;<br>a = b<br><span class="hljs-comment">// =&gt; error: Property &#x27;a&#x27; is missing in type &#x27;T2&#x27; but required in type &#x27;T1&#x27;.</span><br></code></pre></td></tr></table></figure>
<p>ä¸¤è€…å®Œå…¨æ— æ³•å…¼å®¹ï¼Œæ˜¾ç„¶TSæ— éœ€åšå‡ºé€†å˜æˆ–åå˜çš„å…¼å®¹ï¼Œç›´æ¥æŠ¥é”™ã€‚ã€‚ã€‚</p>
<p>è¿™é‡Œå¤šæ’ä¸€å¥ï¼Œè™½ç„¶TSå­˜åœ¨extendsè¯­æ³•ï¼Œä½†æ˜¯å…¶å®TSçš„ç»§æ‰¿æœ¬è´¨ä¸Šä»ç„¶æ˜¯åŸºäºstructual typingå®ç°ï¼Œæ‰€ä»¥å­˜åœ¨ä¸‹é¢çš„ğŸŒ°ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">vector2D</span></span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> x:<span class="hljs-built_in">number</span>, <span class="hljs-keyword">public</span> y: <span class="hljs-built_in">number</span></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.x = x;<br>    <span class="hljs-built_in">this</span>.y = y;<br>  &#125;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">vector3D</span></span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> x:<span class="hljs-built_in">number</span>,<span class="hljs-keyword">public</span> y:<span class="hljs-built_in">number</span>,<span class="hljs-keyword">public</span> z:<span class="hljs-built_in">number</span></span>)</span>&#123;<br>    <span class="hljs-built_in">this</span>.x = x;<br>    <span class="hljs-built_in">this</span>.y = y;<br>    <span class="hljs-built_in">this</span>.z = z;<br>  &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateLength</span>(<span class="hljs-params">v: vector2D</span>)</span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.sqrt(v.x*v.x + v.y*v.y)<br>&#125;<br><span class="hljs-keyword">const</span> point = <span class="hljs-keyword">new</span> vector3D(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)<br><span class="hljs-keyword">const</span> dist = calculateLength(point)<br><span class="hljs-comment">// =&gt; ç¼–è¯‘é€šè¿‡</span><br></code></pre></td></tr></table></figure>
<p>æƒ³è¦æ›´å¥½çš„ç†è§£è¿™ä¸ªéƒ¨åˆ†ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯è¦ç†è§£ç±»å‹ç©ºé—´ï¼Œä»ç±»å‹çš„å±‚é¢å»æ€è€ƒå®‰å…¨æ‰ä¼šæ›´å¥½ç†è§£TSçš„å˜å½¢å¤„ç†æ€è·¯ã€‚</p>
<h3 id="åšä¸ªé¢˜ï¼Ÿ"><a href="#åšä¸ªé¢˜ï¼Ÿ" class="headerlink" title="åšä¸ªé¢˜ï¼Ÿ"></a>åšä¸ªé¢˜ï¼Ÿ</h3><h4 id="è²æ³¢é‚£åˆ‡æ•°åˆ—"><a href="#è²æ³¢é‚£åˆ‡æ•°åˆ—" class="headerlink" title="è²æ³¢é‚£åˆ‡æ•°åˆ—"></a>è²æ³¢é‚£åˆ‡æ•°åˆ—</h4><p>å°æ˜å»å¾®è½¯é¢è¯•ï¼Œå…¶ä¸­æœ‰ä¸€é“æ‰‹å†™ä»£ç é¢˜ã€‚é¢˜å¹²å¾ˆç®€å•ï¼šç”¨TSæ±‚å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬Nä¸ªå€¼~</p>
<p>å¥½å®¶ä¼™ï¼Œè¿™ä¸ªç®€å•å•Šï¼Œäºæ˜¯å°æ˜æ²¡ç­‰é¢è¯•å®˜è¯´å®Œï¼Œåˆ·åˆ·åˆ·åŠåˆ†é’Ÿä¸€ä¸ªé€’å½’å†™å‡ºæ¥äº†ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fib = (n: number): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> &#123;<br>   <span class="hljs-keyword">if</span>(n === <span class="hljs-number">1</span> || n === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>   <span class="hljs-keyword">return</span> fib(n - <span class="hljs-number">1</span>) + fib(n - <span class="hljs-number">2</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å¾ˆå¯æƒœè¿™åªæ˜¯å°æ˜çš„ä¸€å¢æƒ…æ„¿äº†ğŸ˜­~ï¼Œåœ¨å°æ˜æœŸç›¼çš„ç›®å…‰ä¸‹ï¼Œé¢è¯•å®˜ç¼“ç¼“è¯´å‡ºååŠå¥è¯â€”â€”è¯·ç”¨ç±»å‹å®ç°ã€‚</p>
<p>å°æ˜å‚»çœ¼äº†ï¼Œè¿™å¯å’‹åšå‘€ã€‚ã€‚ã€‚</p>
<p>æœ‰äº†ä¸Šé¢çš„å‰ç½®çŸ¥è¯†ï¼Œå…¶å®æˆ‘ç›¸ä¿¡ä½ å·²ç»å¯ä»¥åšå‡ºæ¥è¿™é“é¢˜äº†ï¼Œå¦‚æœåšä¸å‡ºæ¥é‚£å°±çœ‹å°æ˜æ˜¯æ€ä¹ˆè§£é¢˜çš„å§ï¼š</p>
<p>å°æ˜å‘ç°è¿™é“é¢˜çœ‹èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦æŠŠä¸Šé¢çš„å‡½æ•°è½¬æ¢ä¸ºç±»å‹ç³»ç»Ÿå°±å¯ä»¥äº†ï¼Œäºæ˜¯å†™ä¸‹äº†ä¸‹é¢çš„å®šä¹‰ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Fib&lt;N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; = N <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> | <span class="hljs-number">1</span> ? Fib&lt;N - <span class="hljs-number">1</span>&gt; + Fib&lt;N - <span class="hljs-number">2</span>&gt;<br><span class="hljs-comment">// ç¼–è¯‘ä¸é€šè¿‡</span><br></code></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œå¯¹äºTSæ¥è¯´ï¼Œæ²¡æœ‰è¿™ç§è¯­æ³•çš„ï¼Œè®©å°æ˜æ„Ÿåˆ°å¾ˆå¤´ç§ƒï¼Œæ€ä¹ˆå®ç°åŠ å‡è¿ç®—å‘¢ï¼Ÿç±»å‹ç³»ç»Ÿæ˜¾ç„¶ä¸æ”¯æŒåŠ å‡è¿ç®—å•Šï¼Ÿ</p>
<p>èªæ˜çš„å°æ˜çªç„¶æƒ³åˆ°ä¹‹å‰çœ‹åˆ°çš„å‰ç½®çŸ¥è¯†ï¼š</p>
<p>å¯¹äºç±»å‹<code>T[]</code>ï¼Œæœ‰ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> result = [unknown, unknown][<span class="hljs-string">&quot;length&quot;</span>]<br><span class="hljs-comment">// =&gt; 2</span><br></code></pre></td></tr></table></figure>
<p>è¿™å¤ªè®©äººå…´å¥‹äº†ï¼Œå¯ä»¥é€šè¿‡æ„å»ºæ•°ç»„æ¥å®ç°åŠ æ³•æ“ä½œå•Š~</p>
<p>äºæ˜¯å°æ˜å†™ä¸‹äº†å¦‚ä¸‹å£°æ˜ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> NArray&lt;T, N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; = N <span class="hljs-keyword">extends</span> N ? (<span class="hljs-built_in">number</span> <span class="hljs-keyword">extends</span> N ? T[] : _NArray&lt;T, N, []&gt;) : <span class="hljs-built_in">never</span><br><span class="hljs-keyword">type</span> _NArray&lt;T, N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>, R <span class="hljs-keyword">extends</span> unknown[]&gt; = R[<span class="hljs-string">&#x27;length&#x27;</span>] <span class="hljs-keyword">extends</span> N ? R : _NArray&lt;T, N, [T, ...R]&gt;<br><span class="hljs-keyword">type</span> NArrayNumber&lt;L <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; = NArray&lt;<span class="hljs-built_in">number</span>, L&gt;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Add&lt;M <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>, N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; = [...NArrayNumber&lt;M&gt;, ...NArrayNumber&lt;N&gt;][<span class="hljs-string">&#x27;length&#x27;</span>]<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•äº†ä¸€ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> result = Add&lt;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&gt;<br><span class="hljs-comment">// =&gt; result = 3</span><br></code></pre></td></tr></table></figure>
<p>ç¡®å®å¯ä»¥ï¼Œäºæ˜¯å°æ˜æ¨¡ä»¿ç€å†™å‡ºäº†å‡æ³•æ“ä½œï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Subtract&lt;M <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>, N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; =<br>    NArrayNumber&lt;M&gt; <span class="hljs-keyword">extends</span> [...x: NArrayNumber&lt;N&gt;, ...rest: infer R] ? R[<span class="hljs-string">&#x27;length&#x27;</span>] : unknown<br></code></pre></td></tr></table></figure>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> result = Subtract&lt;<span class="hljs-number">2</span>, <span class="hljs-number">1</span>&gt;<br><span class="hljs-comment">// =&gt; result = 1</span><br></code></pre></td></tr></table></figure>
<p>å°æ˜æ„Ÿè§‰offerå¿«è¦åˆ°æ‰‹äº†ï¼Œä»–æ”¹é€ äº†ä¹‹å‰çš„Fibå£°æ˜ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> Fib&lt;N <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span>&gt; =<br>     N <span class="hljs-keyword">extends</span> (<span class="hljs-number">0</span> | <span class="hljs-number">1</span>) ?<br>     <span class="hljs-number">1</span> : Add&lt;Fib&lt;Subtract&lt;N, <span class="hljs-number">1</span>&gt;&gt;, Fib&lt;Subtract&lt;N, <span class="hljs-number">2</span>&gt;&gt;&gt;<br><span class="hljs-comment">// =&gt; error: Type instantiation is excessively deep and possibly infinite.</span><br></code></pre></td></tr></table></figure>
<p>å—¯ï¼Ÿï¼Ÿå°æ˜ç»æœ›çš„å‘ç°ï¼Œæ€ä¹ˆè¿˜æœ‰æŠ¥é”™ï¼Ÿå…¶å®è¿™ä¸ªä¸æ˜¯å°æ˜çš„é—®é¢˜ï¼Œæ˜¯TSä¸ºäº†é¿å…ç±»å‹æ·±åº¦é€’å½’é€ æˆçš„çˆ†æ ˆé—®é¢˜ï¼Œé€‰æ‹©äº†é™åˆ¶æœ€æ·±50å±‚çš„é€’å½’æ·±åº¦ï¼Œå¯ä»¥é€šè¿‡å‡çº§TSç‰ˆæœ¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>æ‰€ä»¥å°æ˜è¿˜æ˜¯é¡ºåˆ©çš„æ‹¿åˆ°äº†offerã€‚</p>
<p>// PS: å†™åˆ°è¿™é‡Œçªç„¶å‘ç°å£å­å¼€çš„æœ‰ç‚¹å¤§ï¼Œå¯èƒ½è¿™ä¸ªç³»åˆ—å°†è¢«æ‹†æˆä¸¤ä¸ªéƒ¨åˆ†å§ã€‚ã€‚ã€‚ä¸‹ä¸€ç¯‡ä¸»è¦è¯´ä¸€äº›æŠ€å·§å’ŒTSçš„ä¸€äº›é™·é˜±ï¼ˆåº”ç”¨ç¯‡ï¼‰ã€‚ã€‚ã€‚</p>
<p>æœªå®Œå¾…ç»­ã€‚</p>

      </section>
      <section class="extra">
        
        <ul class="copyright">
  
  <li><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>herin</li>
  <li><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://kilicmu.github.io/2021/11/11/TS%E5%BF%AB%E9%80%9F%E8%BF%9B%E9%98%B6%EF%BC%88%E7%B1%BB%E5%9E%8B%E7%AF%87%EF%BC%89/index.html">https://kilicmu.github.io/2021/11/11/TS%E5%BF%AB%E9%80%9F%E8%BF%9B%E9%98%B6%EF%BC%88%E7%B1%BB%E5%9E%8B%E7%AF%87%EF%BC%89/index.html</a></li>
  <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« å‡é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"
      rel="external nofollow" target="_blank"> BY-NC-SA </a>è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li>
  
</ul>
        
        
        <section class="donate">
  <div class="qrcode">
    <img   class="lazyload" data-original="/images/others/alipay.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/TYPESCRIPT/" rel="tag">typescript</a></li></ul>

        
<nav class="nav">
  
  
    <a href="/2020/12/19/2020-%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93-2021/">&lt;2020&gt;å¹´ç»ˆæ€»ç»“&lt;/2021&gt;<i class="iconfont iconright"></i></a>
  
</nav>

      </section>
      
      <section class="comments">
  
  <div class="btn" id="comments-btn">æŸ¥çœ‹è¯„è®º</div>
  
  
</section>
      
    </section>
  </div>
</article>
  </div>
</main>
  <footer class="footer">
  <div class="footer-social">
    
    
    
    
    
    <a href="tencent://message/?Menu=yes&uin=102483678 " target="_blank" onMouseOver="this.style.color= '#12B7F5'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconQQ "></i>
    </a>
    
    
    
    
    
    <a href="javascript:; " target="_blank" onMouseOver="this.style.color= '#09BB07'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconwechat-fill "></i>
    </a>
    
    
    
    
    
    <a href="https://www.instagram.com/kilicmu3/ " target="_blank" onMouseOver="this.style.color= '#DA2E76'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconinstagram "></i>
    </a>
    
    
    
    
    
    <a href="https://github.com/kilicmu " target="_blank" onMouseOver="this.style.color= '#24292E'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  icongithub-fill "></i>
    </a>
    
    
    
    
    
    <a href="kilicmu3389@outlook.com " target="_blank" onMouseOver="this.style.color='#FFBE5B'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconmail"></i>
    </a>
    
  </div>
  <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  <div class="fab fab-daovoice">
    <i class="iconfont iconcomment"></i>
  </div>
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
</body>


<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>






<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>






<script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>






<script src="/js/utils.js"></script>
<script src="/js/modules.js"></script>
<script src="/js/zui.js"></script>
<script src="/js/script.js"></script>





<script>
  (function (i, s, o, g, r, a, m) {
    i["DaoVoiceObject"] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    a.charset = "utf-8";
    m.parentNode.insertBefore(a, m)
  })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
    "//widget.daovoice.io/widget/0f81ff2f.js", "daovoice")
  daovoice('init', {
    app_id: "abcdefg"
  }, {
    launcher: {
      disableLauncherIcon: true,
    },
  });
  daovoice('update');
</script>



<script>
  (function () {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    } else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>


<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?4c204d8bc027a0455b5fc642ac334ca8";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>










</html>