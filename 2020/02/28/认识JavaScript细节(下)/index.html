

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DOM&amp;BOM - kilic の 部落格</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />

  
  <meta name="keywords" content="golang,前端,移动端,区块链,智能合约,混吃等死,nodejs,运维,python"> 
  
  <meta name="description" content="承接上文
BOM 与 DOM 不属于 ECMAscri..."> 
  
  <meta name="author" content="kilic"> 

  
    <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  
  
    <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  
  
    <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  
  
    <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_h1619vhl1nr.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
  
  
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css">

  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        loadingImage: '',
      },
      donate: {
        enable: true,
        alipay: '/images/others/alipay.jpg',
        wechat: '/images/others/wechat.jpg'
      },
      motto: {
        api: '',
        default: 'fading is true while flowering is past。'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        alwaysShow: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: true
      }
    }
  </script>

  

  
<meta name="generator" content="Hexo 4.2.0"></head>
<body class="lock-screen">
  <div class="loading"></div>
  


<nav class="navbar">
  <div class="left"></div>
  <div class="center">DOM&BOM</div>
  <div class="right">
    <i class="iconfont iconmenu j-navbar-menu"></i>
  </div>
</nav>

  <nav class="menu">
  <div class="menu-wrap">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content">
      
      
      
      
      <li class="menu-item"><a href="/ " class="underline"> 首页</a></li>
      
      
      
      
      <li class="menu-item"><a href="/galleries " class="underline"> 摄影</a></li>
      
      
      
      
      <li class="menu-item"><a href="/archives " class="underline"> 归档</a></li>
      
      
      
      
      <li class="menu-item"><a href="/tags " class="underline"> 标签</a></li>
      
      
      
      
      <li class="menu-item"><a href="/categories " class="underline"> 分类</a></li>
      
      
      
      
      <li class="menu-item"><a href="/about " class="underline"> 关于</a></li>
      
    </ul>
    <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  </div>
</nav>
  <main id="main">
  <div class="container" id="container">
    <article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="https://i.niupic.com/images/2020/10/31/8WdM.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">DOM&BOM</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>February 28, 2020</span
        class="post-info-item">
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>7855</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <h1 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h1><h2 id="1-定义"><a href="#1-定义" class="headerlink" title="1 定义"></a>1 定义</h2><p>文档对象模型，是可扩展标记语言接口，可以该表网页内容，结构和样式</p>
<p>分为：文档，元素，节点</p>
<h2 id="2-API"><a href="#2-API" class="headerlink" title="2 API"></a>2 API</h2><h3 id="2-1-获取元素"><a href="#2-1-获取元素" class="headerlink" title="2.1 获取元素"></a>2.1 获取元素</h3><ul>
<li>document,getElementById()：返回一个 DOM Element 对象</li>
<li>document.getElementByTagName()：返回一个获取元素对象集合</li>
<li>document.getElementByClassName(): HTML5 新增</li>
<li>document.querySelector(‘.class’)：获取第一个选择对象</li>
<li>document.querySelectorAll(‘.class/tag’)：获取所有的选择器对象</li>
<li>docment.body：返回 body 对象</li>
<li>document.documentElement：返回 html 元素对象</li>
</ul>
<h3 id="2-2-事件-触发响应的机制"><a href="#2-2-事件-触发响应的机制" class="headerlink" title="2.2 事件(触发响应的机制)"></a>2.2 事件(触发响应的机制)</h3><h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><p>事件源：时间触发对象</p>
<p>事件类型：如何触发，何时触发</p>
<p>事件处理程序：通过函数赋值完成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//demo：</span><br><span class="hljs-keyword">var</span> el = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"el"</span>);<br>el.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"click"</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>

<h4 id="事件类型"><a href="#事件类型" class="headerlink" title="事件类型"></a>事件类型</h4><table>
<thead>
<tr>
<th>onclick</th>
<th>鼠标点击左键</th>
</tr>
</thead>
<tbody><tr>
<td>onmouseover</td>
<td>鼠标经过触发</td>
</tr>
<tr>
<td>onmouseout</td>
<td>鼠标离开触发</td>
</tr>
<tr>
<td>onfocus</td>
<td>获得焦点触发</td>
</tr>
<tr>
<td>onblur</td>
<td>失去焦点触发</td>
</tr>
<tr>
<td>onmousemove</td>
<td>鼠标移动触发</td>
</tr>
<tr>
<td>onmouseup</td>
<td>鼠标弹起触发</td>
</tr>
<tr>
<td>onmousedown</td>
<td>鼠标按下触发</td>
</tr>
<tr>
<td>onmouseover</td>
<td>鼠标覆盖（冒泡）</td>
</tr>
<tr>
<td>onmouseenter</td>
<td>鼠标覆盖（不会冒泡）【与 mouseleave 配套】</td>
</tr>
<tr>
<td>onscroll</td>
<td>滚动事件</td>
</tr>
</tbody></table>
<h3 id="2-3-修改元素内容"><a href="#2-3-修改元素内容" class="headerlink" title="2.3 修改元素内容"></a>2.3 修改元素内容</h3><ul>
<li>element.innerText：从起始位置到终止位置内容（不包含 html 标签，空格和换行）【非标准】</li>
<li>element.innerHTML：包括 html 标签和空格和换行【W3C】</li>
<li>src，href</li>
<li>id，alt，title</li>
</ul>
<h3 id="2-4-修改元素样式"><a href="#2-4-修改元素样式" class="headerlink" title="2.4 修改元素样式"></a>2.4 修改元素样式</h3><ul>
<li>element.style（样式采用驼峰命名法）：仅可以获取行内样式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> el = getElementById(<span class="hljs-string">"el"</span>);<br>el.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">this</span>.style.backgroundColor = <span class="hljs-string">"pink"</span>;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>element.className：可以修改或添加类</li>
<li>标准浏览器：window.getComputedStyle(“元素”， [伪类，一般为 null])</li>
<li>IE6-8：获取经过计算的样式：el.currentStyle</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> getCss = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">currentEl, attr</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (!(<span class="hljs-string">"getComputedStyle"</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>)) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"浏览器不兼容"</span>);<br>  &#125;<br>  <span class="hljs-keyword">let</span> val = <span class="hljs-built_in">window</span>.getComputedStyle(currentEl, <span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">let</span> reg = <span class="hljs-regexp">/^-?\d+(\.\d+)?(px|rem|em|pt)?$/i</span>;<br>  reg.test(val) ? (val = <span class="hljs-built_in">parseFloat</span>(val)) : <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">return</span> val;<br>&#125;;<br><br><span class="hljs-keyword">let</span> setCss = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">currentEl, obj</span>) </span>&#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attr <span class="hljs-keyword">in</span> obj) &#123;<br>    <span class="hljs-keyword">if</span> (!obj.hasOwnProperty(attr)) <span class="hljs-keyword">break</span>;<br>    currentEl.style[attr] = obj[attr];<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="2-5-操作元素属性"><a href="#2-5-操作元素属性" class="headerlink" title="2.5 操作元素属性"></a>2.5 操作元素属性</h3><ul>
<li>el.属性：获取内置属性（class 为 className）</li>
<li>el.getAttribute(‘属性’)：获取内置属性或自定义属性<ul>
<li>h5 提出自定义属性需要以 data-开头做属性名</li>
</ul>
</li>
<li>el.dataset.属性：h5 获取新增属性方法（只能获取 data-开头属性，以驼峰命名获取）ie11 以上支持</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> el = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"input"</span>);<br><span class="hljs-built_in">console</span>.log(el.getAttribute(<span class="hljs-string">"attr"</span>)); <span class="hljs-comment">//attr test</span><br><span class="hljs-built_in">console</span>.log(el.getAttribute(<span class="hljs-string">"class"</span>)); <span class="hljs-comment">//classname</span><br><span class="hljs-built_in">console</span>.log(el.className); <span class="hljs-comment">//classname</span><br><span class="hljs-built_in">console</span>.log(el.attr); <span class="hljs-comment">//undefined</span><br></code></pre></td></tr></table></figure>

<ul>
<li>el.setAttribute(‘key’, ‘value’)：修改内置或自定义</li>
</ul>
<h3 id="2-6-表单属性"><a href="#2-6-表单属性" class="headerlink" title="2.6 表单属性"></a>2.6 表单属性</h3><ol>
<li><p>表单中的值通过 value 修改</p>
</li>
<li><p>disabled(表单对象是否禁用 true、false)</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> input = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"input"</span>);<br><span class="hljs-keyword">var</span> btn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"button"</span>);<br>btn.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>  alert(input.value);<br>  input.value = <span class="hljs-string">""</span>;<br>  btn.disabled = <span class="hljs-literal">true</span>;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>通过 type 修改 input 属性（text、password…）</li>
</ol>
<h3 id="2-7-节点操作"><a href="#2-7-节点操作" class="headerlink" title="2.7 节点操作"></a>2.7 节点操作</h3><h4 id="节点属性"><a href="#节点属性" class="headerlink" title="节点属性"></a>节点属性</h4><p>nodeType，nodeName，nodeValue</p>
<p>对于节点类型，元素节点 nodeType 为 1，属性节点 nodeType 为 2，文本节点为 3</p>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><ul>
<li>el.parentNode：获取与元素最近的父节点</li>
<li>el.childNodes：获取元素的所有子节点（包含元素节点和文本节点等，使用 nodeType 过滤）</li>
<li>el.children：获取所有子元素节点（非标准）</li>
<li>el.firstChild：获取第一个子节点</li>
<li>el.lastChild：后去最后一个子节点</li>
<li>el.firstElementChild：获取第一个子元素节点（ie9 以上）</li>
<li>el.lastElementChild：获取最后一个子元素节点（ie9 以上）</li>
<li>el.nextSibling：下一个兄弟节点，包含元素或文本节点</li>
<li>el.previousSibling：上一个兄弟节点</li>
<li>el.nextElementSibling：下一个元素兄弟节点（ie9 以上）</li>
<li>el.previousElementSibling：上一个兄弟节点（ie9 以上）</li>
<li>document.createEelement(‘节点名’)：创建节点，返回一个元素节点对象</li>
<li>el.appendChild(child)：在节点中追加节点（el 是父级别）</li>
<li>el.insertBefore(child，attributechildren)：在指定节点前添加元素</li>
<li>el.removeChild(child)：删除父节点一个子节点</li>
<li>el.cloneNode()：返回一个 el 节点副本，参数为空或 false 是浅拷贝，true 为深拷贝</li>
<li>document.write(‘string’)：文档流 会重绘</li>
</ul>
<h2 id="3-事件"><a href="#3-事件" class="headerlink" title="3 事件"></a>3 事件</h2><h3 id="3-1-注册事件"><a href="#3-1-注册事件" class="headerlink" title="3.1 注册事件"></a>3.1 注册事件</h3><p>传统注册事件以 on 开头有的事件</p>
<ul>
<li>特点：仅仅支持一个处理函数，后面处理函数将会覆盖前面的处理函数</li>
</ul>
<p>方法监听注册方式</p>
<ul>
<li>el.addEventListener(type，listener[，useCapture])：IE9 以上支持<ul>
<li>type：事件类型（click，mouseover 等）</li>
<li>listener：处理函数，事件发生调用</li>
<li>useCapture：可选，默认为 false，true 表示捕获阶段，false 表示冒泡阶段</li>
</ul>
</li>
<li>attachEvent(eventNameWithOn, callback)：全兼容(非标准)</li>
</ul>
<h3 id="3-2-事件注销"><a href="#3-2-事件注销" class="headerlink" title="3.2 事件注销"></a>3.2 事件注销</h3><p>传统方式解绑</p>
<ul>
<li>el.event = null;</li>
</ul>
<p>方法监听移除事件</p>
<ul>
<li>el.removeEventListener(type, listener[,useCapture])</li>
</ul>
<h3 id="3-3-DOM-事件流"><a href="#3-3-DOM-事件流" class="headerlink" title="3.3 DOM 事件流"></a>3.3 DOM 事件流</h3><p><img   class="lazyload" data-original="Web%20APIS.assets/Selection_022.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="Selection_022"></p>
<h3 id="3-4-事件冒泡"><a href="#3-4-事件冒泡" class="headerlink" title="3.4 事件冒泡"></a>3.4 事件冒泡</h3><p><strong>有些事件没有冒泡效果，如 onblur，onfocus，onmouseenter，onmouseleave 等</strong></p>
<p>阻止事件冒泡方法：</p>
<ul>
<li>使用<code>e.stopPropagation()</code>函数停止冒泡</li>
<li>使用<code>e.cancelBubble = true</code>停止传播</li>
</ul>
<h3 id="3-5-事件对象"><a href="#3-5-事件对象" class="headerlink" title="3.5 事件对象"></a>3.5 事件对象</h3><p>事件对象是事件回调的参数，事件对象包含一系列和事件相关数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">el.setEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>&#123;&#125;);<br>el.onclick=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>&#123;&#125;;<br><span class="hljs-comment">//ie9以下需要使用</span><br>el.onclick=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>&#123;e = e ||  <span class="hljs-built_in">window</span>.event)&#125;;<br></code></pre></td></tr></table></figure>

<p>常见属性方法：</p>
<table>
<thead>
<tr>
<th>对象属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>e.target</td>
<td>事件触发对象（标准</td>
</tr>
<tr>
<td>e.srcElement</td>
<td>事件触发对象（非标准 IE6-8</td>
</tr>
<tr>
<td>e.type</td>
<td>事件类型（click 等</td>
</tr>
<tr>
<td>e.cancelBubble</td>
<td>阻止事件冒泡（非标准 ie6-8</td>
</tr>
<tr>
<td>e.returnValue</td>
<td>阻止默认事件（非标准 ie6-8 使用</td>
</tr>
<tr>
<td>e.preventDefault()</td>
<td>阻止默认事件不如不让链接跳转</td>
</tr>
<tr>
<td>e.stopPropagation()</td>
<td>阻止冒泡（标准</td>
</tr>
</tbody></table>
<h3 id="3-6-事件委托"><a href="#3-6-事件委托" class="headerlink" title="3.6 事件委托"></a>3.6 事件委托</h3><p>原理：不给每个子节点添加事件监听器，给父节点添加事件监听器</p>
<p>优点：提高了事件性能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> ul = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'ul'</span>);<br>ul.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>&#123;<br>  e.target.style.backgroundColor = “pink”;<br>&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="3-7-鼠标对象"><a href="#3-7-鼠标对象" class="headerlink" title="3.7 鼠标对象"></a>3.7 鼠标对象</h3><h4 id="鼠标事件应用"><a href="#鼠标事件应用" class="headerlink" title="鼠标事件应用"></a>鼠标事件应用</h4><ol>
<li>禁止鼠标右键菜单</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"contextmenu"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  e.preventDefault();<br>&#125;);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>禁止选中</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"selectstart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  e.preventDefault();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="鼠标事件对象"><a href="#鼠标事件对象" class="headerlink" title="鼠标事件对象"></a>鼠标事件对象</h4><table>
<thead>
<tr>
<th>鼠标事件对象</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>e.clientX</td>
<td>返回鼠标对于浏览器窗口的可视区的 X 坐标</td>
</tr>
<tr>
<td>e.clientY</td>
<td>返回鼠标对于浏览器可视区 Y</td>
</tr>
<tr>
<td>e.pageX</td>
<td>返回鼠标对于文档页面的 X 坐标 ie9+支持</td>
</tr>
<tr>
<td>e.pageY</td>
<td>返回鼠标对于文档页面的 Y 坐标 ie9+支持</td>
</tr>
<tr>
<td>e.screenX</td>
<td>返回鼠标对于屏幕的 x 坐标</td>
</tr>
<tr>
<td>e.screenY</td>
<td>返回鼠标对于屏幕的 Y 坐标</td>
</tr>
</tbody></table>
<h3 id="3-8-键盘事件"><a href="#3-8-键盘事件" class="headerlink" title="3.8 键盘事件"></a>3.8 键盘事件</h3><table>
<thead>
<tr>
<th>键盘事件</th>
<th>触发条件</th>
</tr>
</thead>
<tbody><tr>
<td>onkeyup</td>
<td>某个按键松开触发</td>
</tr>
<tr>
<td>onkeydown</td>
<td>按键按下触发</td>
</tr>
<tr>
<td>onkeypress</td>
<td>按键按下触发（不识别功能键）</td>
</tr>
</tbody></table>
<h4 id="键盘事件对象"><a href="#键盘事件对象" class="headerlink" title="键盘事件对象"></a>键盘事件对象</h4><table>
<thead>
<tr>
<th>键盘事件对象属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>keyCode</td>
<td>返回键的 ASCII 值</td>
</tr>
</tbody></table>
<p>注意：keyup 与 keydown 不区分大小写，keypress 区分大小写</p>
<h2 id="4-元素偏移量（offset）"><a href="#4-元素偏移量（offset）" class="headerlink" title="4 元素偏移量（offset）"></a>4 元素偏移量（offset）</h2><p>offset 可以动态获取元素的位置（偏移量，大小等）</p>
<h3 id="4-1-常用属性"><a href="#4-1-常用属性" class="headerlink" title="4.1 常用属性"></a>4.1 常用属性</h3><table>
<thead>
<tr>
<th>offset 属性</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>el.offsetParent</td>
<td>返回作为元素带有定位的父级元素，若是没有定位返回 body</td>
</tr>
<tr>
<td>el.offsetTop</td>
<td>返回元素相对<strong>带有定位</strong>的父级元素上方的偏移</td>
</tr>
<tr>
<td>el.offsetLeft</td>
<td>返回元素相对带有定位父级元素左边框偏移</td>
</tr>
<tr>
<td>el.offsetWidth</td>
<td>返回自身包括 padding，边框，内容区域的宽度，返回数值不带单位</td>
</tr>
<tr>
<td>el.offsetHeight</td>
<td>返回自身包括 padding，边框，内容区域的高度，不带单位</td>
</tr>
</tbody></table>
<p>注意：offset 属性为只读属性，无法更改变元素位置</p>
<h2 id="5-元素可视区（client）"><a href="#5-元素可视区（client）" class="headerlink" title="5 元素可视区（client）"></a>5 元素可视区（client）</h2><p>client 可以动态得到元素边框大小，元素大小</p>
<h3 id="5-1-常用属性"><a href="#5-1-常用属性" class="headerlink" title="5.1 常用属性"></a>5.1 常用属性</h3><table>
<thead>
<tr>
<th>client 系列属性</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>el.clientTop</td>
<td>返回元素上边框大小</td>
</tr>
<tr>
<td>el.clientLeft</td>
<td>返回元素左边框大小</td>
</tr>
<tr>
<td>el.clientWidth</td>
<td>返回包括 padding，内容区的宽度，不含边框，返回数值不带单位</td>
</tr>
<tr>
<td>el.clientHeight</td>
<td>返回包含 padding，内容区高度，不含边框，返回数值不带单位</td>
</tr>
</tbody></table>
<h2 id="6-元素滚动区域（scroll）"><a href="#6-元素滚动区域（scroll）" class="headerlink" title="6 元素滚动区域（scroll）"></a>6 元素滚动区域（scroll）</h2><p>scroll 系列可以动态得到元素大小，滚动距离</p>
<h3 id="3-6-1-常用属性"><a href="#3-6-1-常用属性" class="headerlink" title="3.6.1 常用属性"></a>3.6.1 常用属性</h3><table>
<thead>
<tr>
<th>scroll 系列属性</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>el.scrollTop</td>
<td>返回被卷上去的上侧距离（页面为 window.pageYoffset())</td>
</tr>
<tr>
<td>el.scrollLeft</td>
<td>返回被卷左侧距离</td>
</tr>
<tr>
<td>el.scrollWidth</td>
<td>返回自身实际宽度，不含边框</td>
</tr>
<tr>
<td>el.scrollHeight</td>
<td>返回自身实际高度，不含边框</td>
</tr>
</tbody></table>
<p><img   class="lazyload" data-original="Web%20APIS.assets/Selection_025.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="Selection_025"></p>
<h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><h2 id="1-window-对象"><a href="#1-window-对象" class="headerlink" title="1 window 对象"></a>1 window 对象</h2><p>浏览器对象模型，为浏览器窗口做交互</p>
<p><img   class="lazyload" data-original="Web%20APIS.assets/Selection_023.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  alt="Selection_023"></p>
<h3 id="1-1-window-对象常见事件"><a href="#1-1-window-对象常见事件" class="headerlink" title="1.1 window 对象常见事件"></a>1.1 window 对象常见事件</h3><ol>
<li>窗口加载事件</li>
</ol>
<p><code>window.onload=function(){}</code>或<code>window.addEventListener(&quot;loader&quot;, function(){})</code></p>
<p>​ 但是有时候图片很多只需要加载 dom 后就执行 js 脚本，可以使用：<code>document.addEventListener(&#39;DOMContentLoaded&#39;,function(){})</code></p>
<ol start="2">
<li><p>window.onresize 事件，窗口尺寸变化事件</p>
<p>可使用 window.addEventListener(“resize”， function())</p>
</li>
</ol>
<h3 id="1-2-定时器"><a href="#1-2-定时器" class="headerlink" title="1.2 定时器"></a>1.2 定时器</h3><p>window 提供了两种定时器</p>
<ol>
<li>window.setTimeout(callback, time)</li>
<li>setInterval(callback，time)</li>
</ol>
<p>对于定时器，可以取一个名字用来取消定时器：<code>clearTimeout(定时器标识符)</code></p>
<h3 id="1-3-数据存储"><a href="#1-3-数据存储" class="headerlink" title="1.3 数据存储"></a>1.3 数据存储</h3><ol>
<li><p>window.sessionStorage</p>
<ol>
<li>生命周期为浏览器窗口</li>
<li>同一个窗口下数据可共享</li>
<li>以键值对存储</li>
</ol>
<p>API：</p>
<ul>
<li>sessionStorage.setItem(key, value);</li>
<li>sessionStorage.getItem(key, value);</li>
<li>sessionStorage.removeItem(key);</li>
<li>sessionStorage.clear()：清除所有数据</li>
</ul>
</li>
<li><p>window.localStorage</p>
<ol>
<li>永久生命周期</li>
<li>多窗口共享</li>
<li>键值对存储</li>
</ol>
</li>
</ol>
<h2 id="2-location-对象"><a href="#2-location-对象" class="headerlink" title="2 location 对象"></a>2 location 对象</h2><h3 id="2-1-属性"><a href="#2-1-属性" class="headerlink" title="2.1 属性"></a>2.1 属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>返回值</th>
</tr>
</thead>
<tbody><tr>
<td>location.href</td>
<td>获取整个 url</td>
</tr>
<tr>
<td>location.host</td>
<td></td>
</tr>
<tr>
<td>location.port</td>
<td></td>
</tr>
<tr>
<td>location.pathname</td>
<td></td>
</tr>
<tr>
<td>location.search</td>
<td></td>
</tr>
<tr>
<td>location.hash</td>
<td>获取片段（#后内容</td>
</tr>
</tbody></table>
<h3 id="2-2-方法"><a href="#2-2-方法" class="headerlink" title="2.2 方法"></a>2.2 方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>返回值</th>
</tr>
</thead>
<tbody><tr>
<td>location.assign(url)</td>
<td>和 href 一样可以跳转页面（记录 hishtory）</td>
</tr>
<tr>
<td>location.replace(url)</td>
<td>替换当前页面（不记录 history）</td>
</tr>
<tr>
<td>location.reload(url)</td>
<td>重新加载页面（相当于 f5，如果参数为 true 强制刷新）</td>
</tr>
</tbody></table>
<h2 id="3-navigator-对象"><a href="#3-navigator-对象" class="headerlink" title="3 navigator 对象"></a>3 navigator 对象</h2><p>navigator 对象包含浏览器信息与操作系统信息等</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>对象</th>
</tr>
</thead>
<tbody><tr>
<td>userAgent</td>
<td>查看浏览器信息</td>
</tr>
</tbody></table>
<h2 id="4-hishtory-对象"><a href="#4-hishtory-对象" class="headerlink" title="4 hishtory 对象"></a>4 hishtory 对象</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>back()</td>
<td>回退</td>
</tr>
<tr>
<td>forward()</td>
<td>前进</td>
</tr>
<tr>
<td>go(number)</td>
<td>前进后退（1 为前进一个页面，-1 为后退一个页面）</td>
</tr>
</tbody></table>
<h1 id="5-移动端"><a href="#5-移动端" class="headerlink" title="5. 移动端"></a>5. 移动端</h1><h2 id="5-1-事件"><a href="#5-1-事件" class="headerlink" title="5.1 事件"></a>5.1 事件</h2><table>
<thead>
<tr>
<th>触屏 touch 事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>touchstart</td>
<td>手指触摸到 DOM 元素触发</td>
</tr>
<tr>
<td>touchmove</td>
<td>手指在 DOM 滑动触发</td>
</tr>
<tr>
<td>touchend</td>
<td>手指从 DOM 元素移开触发</td>
</tr>
</tbody></table>
<h2 id="5-2-事件对象"><a href="#5-2-事件对象" class="headerlink" title="5.2 事件对象"></a>5.2 事件对象</h2><table>
<thead>
<tr>
<th>触摸列表</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>touches</td>
<td>正在触摸屏幕的所有手指的列表(touchend 没有)</td>
</tr>
<tr>
<td>targetTouches</td>
<td>正在触摸当前 DOM 元素上的手指列表(touchend 没有)</td>
</tr>
<tr>
<td>changedTouched</td>
<td>手指状态发生改变的列表，从无到有，从有到无</td>
</tr>
</tbody></table>
<h2 id="5-3-特点："><a href="#5-3-特点：" class="headerlink" title="5.3 特点："></a>5.3 特点：</h2><ol>
<li><p>300ms 延迟问题</p>
<blockquote>
<ol>
<li><p>可以通过使用&lt;meta name=“viewport” content=”user0scalable=no”解决 300ms 延迟</p>
</li>
<li><p>通过 touch 事件解决延迟：</p>
<ol>
<li>记录触摸时间</li>
<li>离开时间减去触摸时间</li>
<li>时间小于 150mx 且没有滑动则，定义为点击</li>
</ol>
</li>
<li><p>一个 js 插件：fashclick.js</p>
</li>
</ol>
</blockquote>
</li>
<li><p>Swiper 插件</p>
</li>
<li><p>移动端视频插件 zy.media.js</p>
</li>
<li><p>点击穿透问题</p>
<blockquote>
<p>当有一个绝对定位或固定定位元素绑定了 touch 事件，那么覆盖在他之下的具有点击特性的元素也会被触发。</p>
<p>比如: 有一个遮罩层 A 元素，他的底下有一个链接元素 B. 当这个遮罩层点击之后希望遮罩层消失，真实的状况是这时候点击遮罩层不见的同时会跳转页面。</p>
</blockquote>
<p>解决方案：</p>
<blockquote>
<p>下层元素不使用点击特性的元素</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ev</span>) </span>&#123;<br>  ev.preventDefault();<br>&#125;);<br><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"touchstart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ev</span>) </span>&#123;<br>  ev.preventDefault();<br>&#125;);<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 按需加载</span><br><span class="hljs-comment"> * 添加a标签的点击事件。</span><br><span class="hljs-comment"> */</span><br>a.addEventListener(<span class="hljs-string">"touchstart"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>&#123;<br>  <span class="hljs-built_in">window</span>.location = <span class="hljs-keyword">this</span>.href;<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
</ol>
      </section>
      <section class="extra">
        
        <ul class="copyright">
  
  <li><strong>本文作者：</strong>kilic</li>
  <li><strong>本文链接：</strong><a href="https://kilicmu.github.io/2020/02/28/%E8%AE%A4%E8%AF%86JavaScript%E7%BB%86%E8%8A%82(%E4%B8%8B)/index.html">https://kilicmu.github.io/2020/02/28/%E8%AE%A4%E8%AF%86JavaScript%E7%BB%86%E8%8A%82(%E4%B8%8B)/index.html</a></li>
  <li><strong>版权声明：</strong>本博客所有文章均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"
      rel="external nofollow" target="_blank"> BY-NC-SA </a>许可协议，转载请注明出处！</li>
  
</ul>
        
        
        <section class="donate">
  <div class="qrcode">
    <img   class="lazyload" data-original="/images/others/alipay.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVASCRIPT/" rel="tag">JavaScript</a></li></ul>

        
<nav class="nav">
  
    <a href="/2020/03/07/%E5%BC%82%E6%AD%A5%E6%9C%BA%E5%88%B6%E6%95%B4%E7%90%86/"><i class="iconfont iconleft"></i>异步机制整理</a>
  
  
    <a href="/2020/02/28/%E8%AE%A4%E8%AF%86JavaScript%E7%BB%86%E8%8A%82(%E4%B8%8A)/">认识JavaScript细节(上)<i class="iconfont iconright"></i></a>
  
</nav>

      </section>
      
      <section class="comments">
  
  <div class="btn" id="comments-btn">查看评论</div>
  
  
</section>
      
    </section>
  </div>
</article>
  </div>
</main>
  <footer class="footer">
  <div class="footer-social">
    
    
    
    
    
    <a href="tencent://message/?Menu=yes&uin=102483678 " target="_blank" onMouseOver="this.style.color= '#12B7F5'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconQQ "></i>
    </a>
    
    
    
    
    
    <a href="javascript:; " target="_blank" onMouseOver="this.style.color= '#09BB07'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconwechat-fill "></i>
    </a>
    
    
    
    
    
    <a href="https://www.instagram.com/kilicmu3/ " target="_blank" onMouseOver="this.style.color= '#DA2E76'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconinstagram "></i>
    </a>
    
    
    
    
    
    <a href="https://github.com/kilicmu " target="_blank" onMouseOver="this.style.color= '#24292E'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  icongithub-fill "></i>
    </a>
    
    
    
    
    
    <a href="kilicmu3389@outlook.com " target="_blank" onMouseOver="this.style.color='#FFBE5B'"
      onMouseOut="this.style.color='#33333D'">
      <i class="iconfont footer-social-item  iconmail"></i>
    </a>
    
  </div>
  <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  <div class="fab fab-daovoice">
    <i class="iconfont iconcomment"></i>
  </div>
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
</body>


<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>






<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>






<script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>






<script src="/js/utils.js"></script>
<script src="/js/modules.js"></script>
<script src="/js/zui.js"></script>
<script src="/js/script.js"></script>





<script>
  (function (i, s, o, g, r, a, m) {
    i["DaoVoiceObject"] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    a.charset = "utf-8";
    m.parentNode.insertBefore(a, m)
  })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
    "//widget.daovoice.io/widget/0f81ff2f.js", "daovoice")
  daovoice('init', {
    app_id: "abcdefg"
  }, {
    launcher: {
      disableLauncherIcon: true,
    },
  });
  daovoice('update');
</script>



<script>
  (function () {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    } else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>


<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?4c204d8bc027a0455b5fc642ac334ca8";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>










</html>