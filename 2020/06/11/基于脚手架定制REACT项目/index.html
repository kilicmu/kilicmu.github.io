<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="kilic">
  <!-- Open Graph Data -->
  <meta property="og:title" content="基于脚手架定制React项目"/>
  <meta property="og:description" content="咸鱼，无业游民" />
  <meta property="og:site_name" content="kilic の 部落格"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://kilic.site"/>
  
    <link rel="alternate" href="/atom.xml" title="kilic の 部落格" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>kilic の 部落格</title>

  <!-- Bootstrap CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  
  
<link rel="stylesheet" href="/css/style.dark.css">


  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/m2.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">基于脚手架定制React项目</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/kilicmu">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:kilicmu3389@outlook.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By kilic</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2020-06-11</span>
            <span class="time">02:12:04</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/REACT/">#React</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>create-react-app可以帮助我们快速的搭建一个可用的React环境，但是其中一些东西仍然需要我们去手动配置。本文将总结一下我常用的二次配置方案。</p>
<a id="more"></a>

<h2 id="暴露react-scripts配置"><a href="#暴露react-scripts配置" class="headerlink" title="暴露react-scripts配置"></a>暴露react-scripts配置</h2><p><code>create-react-app react-app --typescript</code></p>
<p>我们需要进行二次配置，所以我们需要暴露配置文件：</p>
<p><code>yarn eject</code></p>
<p>运行后的目录如下：</p>
<p><img src="https://i.niupic.com/images/2020/06/11/8g5a.png" alt="项目目录"></p>
<h2 id="配置css预处理语言"><a href="#配置css预处理语言" class="headerlink" title="配置css预处理语言"></a>配置css预处理语言</h2><p>个人比较喜欢使用scss，react脚手架默认配置了scss环境，scss提供的功能比较强大。但是有时候需要使用轻便的less，所以下面演示配置less环境。</p>
<ul>
<li><p>安装less与less-loader</p>
<p><code>yarn add less less-loader –dev</code></p>
</li>
<li><p>添加less文件匹配规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lessRegex = <span class="regexp">/\.less$/</span>;</span><br><span class="line"><span class="keyword">const</span> lessModuleRegex = <span class="regexp">/\.module\.less$/</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加处理规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">       <span class="comment">/* 省略代码 */</span></span><br><span class="line">       &#123;</span><br><span class="line">         oneOf: [</span><br><span class="line">           <span class="comment">//......</span></span><br><span class="line">           &#123;</span><br><span class="line">             test: lessRegex,</span><br><span class="line">             exclude: lessModuleRegex,</span><br><span class="line">             use: getStyleLoaders(</span><br><span class="line">               &#123;</span><br><span class="line">                 importLoaders: <span class="number">1</span>, <span class="comment">// 只需要引入一个loader</span></span><br><span class="line">                 sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="string">"less-loader"</span></span><br><span class="line">             ),</span><br><span class="line">             sideEffects: <span class="literal">true</span>,</span><br><span class="line">           &#125;,</span><br><span class="line">           &#123;</span><br><span class="line">             test: lessModuleRegex,</span><br><span class="line">             use: getStyleLoaders(</span><br><span class="line">               &#123;</span><br><span class="line">                 importLoaders: <span class="number">1</span>,</span><br><span class="line">                 sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">                 modules: &#123;</span><br><span class="line">                   getLocalIdent: getCSSModuleLocalIdent,</span><br><span class="line">                 &#125;,</span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="string">"less-loader"</span></span><br><span class="line">             ),</span><br><span class="line">           &#125;,</span><br><span class="line">     ]</span><br></pre></td></tr></table></figure>

<p>在<code>src/react-app-env.d.ts</code>声明一下模块，防止<code>Cannot find module &#39;./xxx.module.less&#39;</code>错误</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="built_in">module</span> <span class="string">'*.less'</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> styles: any;</span><br><span class="line">  <span class="keyword">export</span> = styles;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样在项目中可以直接使用less模块了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">"./less/index.module.less"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(styles);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;styles.father&#125;&gt;</span><br><span class="line">      &lt;div className=&#123;styles.son&#125;&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="定义别名"><a href="#定义别名" class="headerlink" title="定义别名"></a>定义别名</h2><p>定义常用的目录别名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">        <span class="string">'@'</span>: path.join(__dirname, <span class="string">'../src/'</span>),</span><br><span class="line">        <span class="string">'@components'</span>: path.join(__dirname, <span class="string">'../src/components'</span>),</span><br><span class="line">        <span class="string">'@images'</span>: path.join(__dirname, <span class="string">'../src/images'</span>),</span><br><span class="line">        <span class="comment">// ......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用tslint与stylelint统一风格"><a href="#使用tslint与stylelint统一风格" class="headerlink" title="使用tslint与stylelint统一风格"></a>使用tslint与stylelint统一风格</h2><ul>
<li><p>tslint：用来约束项目的逻辑代码风格，可以通过在根目录添加<code>.tslint.json</code>进行配置，可以直接引入<code>tslint-react</code>，其他规则自己添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"extends"</span>: [<span class="string">"tslint-react"</span>],</span><br><span class="line">  <span class="string">"rules"</span>: &#123;</span><br><span class="line">    <span class="comment">/* 自定义规则 */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>stylelint: 约束项目样式的代码风格：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"extends"</span>: <span class="string">"stylelint-config-standard"</span>,</span><br><span class="line">  <span class="string">"rules"</span>: &#123;</span><br><span class="line">    <span class="comment">/* 自定义规则 */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="封装axios请求"><a href="#封装axios请求" class="headerlink" title="封装axios请求"></a>封装axios请求</h2><p>如果需要跨域调试接口，可以在package.json设置代理：</p>
<p><code>&quot;proxy&quot;: &quot;http://127.0.0.1:3000&quot;</code></p>
<p>引如axios包：</p>
<p><code>yarn add axios</code></p>
<p>配置封装axios，此处po上我的常用配置与封装：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"><span class="comment">/** 设置axios的默认配置 */</span></span><br><span class="line"><span class="comment">// axios.defaults.baseURL = "http://127.0.0.1:3000/api/"; //如果使用了proxy代理，这里不需要配置</span></span><br><span class="line">axios.defaults.timeout = <span class="number">6000</span>;</span><br><span class="line"><span class="comment">// 超时重连的解决方案</span></span><br><span class="line">axios.interceptors.response.use(<span class="literal">undefined</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> config = error.config;</span><br><span class="line">  config._count = config._count || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (++config._count &gt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> handlePromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;, config._count * <span class="number">1000</span> || <span class="number">1000</span>);	<span class="comment">//超时重连间隔+1s</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> handlePromise.then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> axios(config);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HttpMethods = <span class="string">"GET"</span> | <span class="string">"POST"</span>;</span><br><span class="line"><span class="keyword">interface</span> RequestParams &#123;</span><br><span class="line">  method?: HttpMethods;</span><br><span class="line">  data?: object;</span><br><span class="line">  query?: object;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 发送GET与POST的异步请求，</span></span><br><span class="line"><span class="comment"> * 使用柯里化分离请求地址和发送数据，</span></span><br><span class="line"><span class="comment"> * 根据query与data确认请求方法，query是get请求，data是post请求</span></span><br><span class="line"><span class="comment"> * 请求示例:require(url)(&#123;&#125;)/require(url)(&#123;query:&#123;id:1&#125;&#125;)/require(url)(&#123;data:&#123;id:1&#125;&#125;)</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; url 请求url</span></span><br><span class="line"><span class="comment"> * @return &#123;function&#125; 请求配置函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> request = <span class="function">(<span class="params">url: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  url = url &amp;&amp; url.length !== <span class="number">0</span> ? url : <span class="string">"/"</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">params: RequestParams</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> method = params.data ? <span class="string">"POST"</span> : <span class="string">"GET"</span>;</span><br><span class="line">    <span class="keyword">let</span> query = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> data = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">switch</span> (method) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"GET"</span>:</span><br><span class="line">        query = method === <span class="string">"GET"</span> ? (params.query ? params.query : &#123;&#125;) : <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">"POST"</span>:</span><br><span class="line">        data = method === <span class="string">"POST"</span> ? (params.data ? params.data : &#123;&#125;) : <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> config: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line">    config[<span class="string">"url"</span>] = url;</span><br><span class="line">    config[<span class="string">"method"</span>] = method;</span><br><span class="line">    data &amp;&amp; (config[<span class="string">"data"</span>] = data);</span><br><span class="line">    query &amp;&amp; (config[<span class="string">"params"</span>] = query);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      axios(config)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          resolve(res.data);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          reject(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; request &#125;;</span><br></pre></td></tr></table></figure>

<p>也可以使用fetch请求，可以自己做一下封装。</p>
<h2 id="按需引入react-router"><a href="#按需引入react-router" class="headerlink" title="按需引入react-router"></a>按需引入react-router</h2><p>react-router总共有<code>react-router</code>，<code>react-router-dom</code>，<code>react-router-native</code>，三个包。若是web开发则只需要使用react-router-dom包。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-router-dom</span><br><span class="line">yarn add @types/react-router-dom -D</span><br></pre></td></tr></table></figure>

<h2 id="react-loadable"><a href="#react-loadable" class="headerlink" title="react-loadable"></a>react-loadable</h2><p>为什么引入react-loadable？</p>
<p>SPA因为需要引入大量js脚本进行渲染，所以首屏渲染极慢，为了解决这个问题，我们需要对代码进行分割（使用懒加载动态import()进行代码拆分），但是我们需要对这个加载状态进行控制，所以使用了react-loadable。</p>
<p>下载：</p>
<p><code>yarn add react-loadable</code></p>
<p>如果使用ts则下载：</p>
<p><code>yarn add @types/react-loadable --dev</code></p>
<h4 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h4><p>react-router是离散式路由，显然不如集中式路由方便管理配置，所以我们封装一下集中式管理route。</p>
<p><code>touch src/routes/index.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Loadable <span class="keyword">from</span> <span class="string">'react-loadable'</span>;</span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">'../components/Loading'</span>; <span class="comment">// 自定义Loading显示组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="built_in">Error</span> <span class="keyword">from</span> <span class="string">'./components/Error'</span>;	<span class="comment">// 自定义错误显示组件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> asyncLoad = <span class="function">(<span class="params">loader: (</span>)=&gt;</span><span class="built_in">Promise</span>&lt;any&gt;) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> Loadable(&#123;</span><br><span class="line">        loader,</span><br><span class="line">        loading: <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(props.pastDelay) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Loading</span> /&gt;</span></span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(props.error) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Error</span> /&gt;</span></span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        delay: <span class="number">400</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> generateRouteConfig = <span class="function">(<span class="params">routes: IRouteConfig[]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> routes.map(<span class="function"><span class="params">_item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            key: _item.path,</span><br><span class="line">            exact: <span class="keyword">typeof</span> _item.exact === <span class="string">'undefined'</span> ? <span class="literal">true</span>:_item.exact,</span><br><span class="line">            component: _item.component,</span><br><span class="line">            ..._item,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routeConfig: any = [</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/'</span>,</span><br><span class="line">        component: asyncLoad(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/*你的组件*/</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">'/exception'</span>,</span><br><span class="line">        component: asyncLoad(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="comment">/*你的组件*/</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * // TODO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">]</span><br><span class="line">    </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> generateRouteConfig(routeConfig);</span><br></pre></td></tr></table></figure>

<p>使用路由：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> ‘react<span class="string">';</span></span><br><span class="line"><span class="string">import &#123;Router&#125; from '</span>react-router<span class="string">';</span></span><br><span class="line"><span class="string">import routes from '</span>./routes<span class="string">';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const App = () =&gt; &#123;</span></span><br><span class="line"><span class="string">    return (</span></span><br><span class="line"><span class="string">    	&lt;Router&gt;</span></span><br><span class="line"><span class="string">        	&lt;Switch&gt;</span></span><br><span class="line"><span class="string">        		&#123;routes.map((&#123;path, component, exact&#125; =&gt; (</span></span><br><span class="line"><span class="string">                	&lt;Route key=&#123;path&#125; path=&#123;path&#125; component=&#123;component&#125; exact=&#123;exact&#125; /&gt;</span></span><br><span class="line"><span class="string">                )))&#125;</span></span><br><span class="line"><span class="string">        	&lt;/Switch&gt;</span></span><br><span class="line"><span class="string">        &lt;/Router&gt;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>// 其他的随着使用再加…….</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->

<script src="/js/highlight.pack.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

